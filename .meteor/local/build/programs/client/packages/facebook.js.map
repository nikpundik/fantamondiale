)]}'
{"version":3,"file":"\\packages\\facebook.js","sources":["facebook/facebook_configure.html","facebook/facebook_configure.js","facebook/facebook_client.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACA,2E;AACA,kB;AACA,sB;AACA,4jB;AACA,kB;AACA,iB;AACA,sD;AACA,oN;AACA,I;;;;;;;;;;;;;;;;;;;ACTA,uE;AACA,8B;AACA,E;;AAEA,sE;AACA,U;AACA,yC;AACA,6C;AACA,I;AACA,E;;;;;;;;;;;;;;;;;;ACTA,c;;AAEA,4C;AACA,E;AACA,4B;AACA,mF;AACA,4E;AACA,W;AACA,oF;AACA,qD;AACA,4E;AACA,gD;AACA,iB;AACA,G;;AAEA,kF;AACA,gB;AACA,2E;AACA,8C;AACA,W;AACA,G;;AAEA,wC;AACA,oG;AACA,2C;;AAEA,sB;AACA,4C;AACA,iD;;AAEA,gB;AACA,2E;AACA,wE;AACA,gF;;AAEA,kB;AACA,a;AACA,oE;AACA,I;AACA,E","sourcesContent":["\nTemplate.__define__(\"configureLoginServiceDialogForFacebook\", (function() {\n  var self = this;\n  var template = this;\n  return [ HTML.Raw(\"<p>\\n    First, you'll need to register your app on Facebook. Follow these steps:\\n  </p>\\n  \"), HTML.OL(HTML.Raw('\\n    <li>\\n      Visit <a href=\"https://developers.facebook.com/apps\" target=\"_blank\">https://developers.facebook.com/apps</a>\\n    </li>\\n    <li>\\n      Select \"Apps\", then \"Create a New App\". (You don\\'t need to enter a namespace.)\\n    </li>\\n    <li>\\n      Select \"Settings\" and enter a \"Contact Email\".  Then select \"Add Platform\"\\n      and choose \"Website\".\\n    </li>\\n    '), HTML.LI(\"\\n      Set Site URL to: \", HTML.SPAN({\n    \"class\": \"url\"\n  }, function() {\n    return Spacebars.mustache(self.lookup(\"siteUrl\"));\n  }), \"\\n    \"), HTML.Raw('\\n    <li>\\n      Select \"Status\" and make the app and all its live features available to\\n      the general public.\\n    </li>\\n    <li>\\n      Select \"Dashboard\".\\n    </li>\\n  ')) ];\n}));\n","Template.configureLoginServiceDialogForFacebook.siteUrl = function () {\r\n  return Meteor.absoluteUrl();\r\n};\r\n\r\nTemplate.configureLoginServiceDialogForFacebook.fields = function () {\r\n  return [\r\n    {property: 'appId', label: 'App ID'},\r\n    {property: 'secret', label: 'App Secret'}\r\n  ];\r\n};","Facebook = {};\r\n\r\n// Request Facebook credentials for the user\r\n//\r\n// @param options {optional}\r\n// @param credentialRequestCompleteCallback {Function} Callback function to call on\r\n//   completion. Takes one argument, credentialToken on success, or Error on\r\n//   error.\r\nFacebook.requestCredential = function (options, credentialRequestCompleteCallback) {\r\n  // support both (options, callback) and (callback).\r\n  if (!credentialRequestCompleteCallback && typeof options === 'function') {\r\n    credentialRequestCompleteCallback = options;\r\n    options = {};\r\n  }\r\n\r\n  var config = ServiceConfiguration.configurations.findOne({service: 'facebook'});\r\n  if (!config) {\r\n    credentialRequestCompleteCallback && credentialRequestCompleteCallback(\r\n      new ServiceConfiguration.ConfigError());\r\n    return;\r\n  }\r\n\r\n  var credentialToken = Random.secret();\r\n  var mobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|Windows Phone/i.test(navigator.userAgent);\r\n  var display = mobile ? 'touch' : 'popup';\r\n\r\n  var scope = \"email\";\r\n  if (options && options.requestPermissions)\r\n    scope = options.requestPermissions.join(',');\r\n\r\n  var loginUrl =\r\n        'https://www.facebook.com/dialog/oauth?client_id=' + config.appId +\r\n        '&redirect_uri=' + Meteor.absoluteUrl('_oauth/facebook?close') +\r\n        '&display=' + display + '&scope=' + scope + '&state=' + credentialToken;\r\n\r\n  OAuth.showPopup(\r\n    loginUrl,\r\n    _.bind(credentialRequestCompleteCallback, null, credentialToken)\r\n  );\r\n};\r\n"]}